{"version":3,"file":"perfume.js-angular.js.map","sources":["ng://perfume.js/angular/lib/perfume.module.ts","ng://perfume.js/angular/public_api.ts","ng://perfume.js/angular/perfume.js-angular.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Inject,\n  Injectable,\n  InjectionToken,\n  ModuleWithProviders,\n  NgModule,\n} from '@angular/core';\nimport Perfume, { IPerfumeConfig } from 'perfume.js';\n\nexport let perfume;\n\nexport const PERFUME_CONFIG = new InjectionToken('Perfume.js config');\n\n@NgModule({})\nexport class PerfumeRootModule {\n  constructor(@Inject(PERFUME_CONFIG) public config: IPerfumeConfig) {\n    perfume = new Perfume(config);\n  }\n}\n\n@Injectable()\nexport class NgPerfume {\n  perfume: Perfume;\n  config: IPerfumeConfig;\n  firstPaintDuration = 0;\n  firstContentfulPaintDuration = 0;\n  firstInputDelayDuration = 0;\n  observeFirstContentfulPaint: Promise<number>;\n  observeFirstInputDelay: Promise<number>;\n  observeTimeToInteractive?: Promise<number>;\n  timeToInteractiveDuration = 0;\n\n  constructor() {\n    this.config = perfume.config;\n    this.firstPaintDuration = perfume.firstPaintDuration;\n    this.firstContentfulPaintDuration = perfume.firstContentfulPaintDuration;\n    this.firstInputDelayDuration = perfume.firstInputDelayDuration;\n    this.observeFirstContentfulPaint = perfume.observeFirstContentfulPaint;\n    this.observeFirstInputDelay = perfume.observeFirstInputDelay;\n    this.observeTimeToInteractive = perfume.observeTimeToInteractive;\n    this.timeToInteractiveDuration = perfume.timeToInteractiveDuration;\n  }\n\n  start(metricName: string): void {\n    perfume.start(metricName);\n  }\n\n  end(metricName: string): void | number {\n    return perfume.end(metricName);\n  }\n\n  endPaint(metricName: string): Promise<void | number> {\n    return perfume.endPaint(metricName);\n  }\n\n  log(metricName: string, duration: number): void {\n    perfume.log(metricName, duration);\n  }\n\n  sendTiming(metricName: string, duration: number): void {\n    perfume.sendTiming(metricName, duration);\n  }\n}\n\n@NgModule({\n  imports: [],\n  declarations: [],\n  exports: [],\n})\nexport class PerfumeModule {\n  public static forRoot(config: any): ModuleWithProviders {\n    return {\n      ngModule: PerfumeRootModule,\n      providers: [\n        {\n          provide: PERFUME_CONFIG,\n          useValue: config,\n        },\n        NgPerfume,\n      ],\n    };\n  }\n}\n\n/**\n * Describes any Angular component class that implements `AfterViewInit`.\n */\n// tslint:disable-next-line:interface-name\nexport interface AfterViewInitable {\n  prototype: AfterViewInit;\n  new (...args: any[]): AfterViewInit;\n}\n\n/**\n * Component View Init (CVI) decorator\n * Marks the time between the constructor is initialized,\n * and ngAfterViewInit execution ends.\n */\n// tslint:disable-next-line:function-name\nexport function PerfumeAfterViewInit(targetName?: string) {\n  return function DecoratorFactory(target: AfterViewInitable) {\n    // The new constructor behavior, supports AOT and DI\n    const newConstructor: any = function newCtor(...args) {\n      perfume.start(targetName || target.name);\n      const c: any = function childConstuctor() {\n        return target.apply(this, arguments);\n      };\n      c.prototype = Object.create(target.prototype);\n      return new c(...args);\n    };\n\n    // The new ngAfterViewInit behavior\n    const ngAfterViewInit = target.prototype.ngAfterViewInit;\n    target.prototype.ngAfterViewInit = function(...args) {\n      // tslint:disable-next-line:no-unused-expression\n      ngAfterViewInit && ngAfterViewInit.apply(this, args);\n      perfume.end(targetName || target.name);\n    };\n\n    // Copy prototype so instanceof operator still works\n    newConstructor.prototype = Object.create(target.prototype);\n\n    // Return new constructor (will override original)\n    return newConstructor;\n  };\n}\n","/*\n * Public API Surface of perfume\n */\n\nexport * from './lib/perfume.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;IAUW,OAAO,CAAC;AAEnB,IAAa,cAAc,GAAG,IAAI,cAAc,CAAC,mBAAmB,CAAC,CAAC;AAEtE;IAEE,2BAA2C,MAAsB;QAAtB,WAAM,GAAN,MAAM,CAAgB;QAC/D,OAAO,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC;KAC/B;;gBAJF,QAAQ,SAAC,EAAE;;;;gDAEG,MAAM,SAAC,cAAc;;IAGpC,wBAAC;CALD,IAKC;;IAcC;QARA,uBAAkB,GAAG,CAAC,CAAC;QACvB,iCAA4B,GAAG,CAAC,CAAC;QACjC,4BAAuB,GAAG,CAAC,CAAC;QAI5B,8BAAyB,GAAG,CAAC,CAAC;QAG5B,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QAC7B,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC;QACrD,IAAI,CAAC,4BAA4B,GAAG,OAAO,CAAC,4BAA4B,CAAC;QACzE,IAAI,CAAC,uBAAuB,GAAG,OAAO,CAAC,uBAAuB,CAAC;QAC/D,IAAI,CAAC,2BAA2B,GAAG,OAAO,CAAC,2BAA2B,CAAC;QACvE,IAAI,CAAC,sBAAsB,GAAG,OAAO,CAAC,sBAAsB,CAAC;QAC7D,IAAI,CAAC,wBAAwB,GAAG,OAAO,CAAC,wBAAwB,CAAC;QACjE,IAAI,CAAC,yBAAyB,GAAG,OAAO,CAAC,yBAAyB,CAAC;KACpE;IAED,yBAAK,GAAL,UAAM,UAAkB;QACtB,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;KAC3B;IAED,uBAAG,GAAH,UAAI,UAAkB;QACpB,OAAO,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;KAChC;IAED,4BAAQ,GAAR,UAAS,UAAkB;QACzB,OAAO,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;KACrC;IAED,uBAAG,GAAH,UAAI,UAAkB,EAAE,QAAgB;QACtC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;KACnC;IAED,8BAAU,GAAV,UAAW,UAAkB,EAAE,QAAgB;QAC7C,OAAO,CAAC,UAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;KAC1C;;gBAzCF,UAAU;;;;IA0CX,gBAAC;CA1CD,IA0CC;;IAED;KAkBC;IAZe,qBAAO,GAArB,UAAsB,MAAW;QAC/B,OAAO;YACL,QAAQ,EAAE,iBAAiB;YAC3B,SAAS,EAAE;gBACT;oBACE,OAAO,EAAE,cAAc;oBACvB,QAAQ,EAAE,MAAM;iBACjB;gBACD,SAAS;aACV;SACF,CAAC;KACH;;gBAjBF,QAAQ,SAAC;oBACR,OAAO,EAAE,EAAE;oBACX,YAAY,EAAE,EAAE;oBAChB,OAAO,EAAE,EAAE;iBACZ;;IAcD,oBAAC;CAlBD,IAkBC;AAWD;;;;;;AAMA,SAAgB,oBAAoB,CAAC,UAAmB;IACtD,OAAO,SAAS,gBAAgB,CAAC,MAAyB;;QAExD,IAAM,cAAc,GAAQ,SAAS,OAAO;YAAC,cAAO;iBAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gBAAP,yBAAO;;YAClD,OAAO,CAAC,KAAK,CAAC,UAAU,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC;YACzC,IAAM,CAAC,GAAQ,SAAS,eAAe;gBACrC,OAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;aACtC,CAAC;YACF,CAAC,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAC9C,YAAW,CAAC,YAAD,CAAC,qBAAI,IAAI,MAAE;SACvB,CAAC;;QAGF,IAAM,eAAe,GAAG,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC;QACzD,MAAM,CAAC,SAAS,CAAC,eAAe,GAAG;YAAS,cAAO;iBAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gBAAP,yBAAO;;;YAEjD,eAAe,IAAI,eAAe,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACrD,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC;SACxC,CAAC;;QAGF,cAAc,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;;QAG3D,OAAO,cAAc,CAAC;KACvB,CAAC;CACH;;AC9HD;;GAEG;;ACFH;;GAEG;;;;"}
