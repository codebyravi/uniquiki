import { InjectionToken, Injectable, NgModule, Optional, Inject } from '@angular/core';
import { __assign } from 'tslib';
import { ApolloLink, Observable } from 'apollo-link';
export { createOperation, makePromise, toPromise, fromPromise, fromError, Observable, execute, empty, from, split, concat, ApolloLink } from 'apollo-link';
import { Apollo, ApolloModule } from 'apollo-angular';
export { ɵb, ɵa, Apollo, ApolloBase, QueryRef, Query, Mutation, Subscription, SelectPipe, ApolloModule, APOLLO_OPTIONS } from 'apollo-angular';
import { HttpLink, HttpLinkModule } from 'apollo-angular-link-http';
import { withClientState } from 'apollo-link-state';
import { onError } from 'apollo-link-error';
import { InMemoryCache } from 'apollo-cache-inmemory';
export { InMemoryCache, defaultDataIdFromObject, assertIdValue, StoreReader, enhanceErrorWithDocument, WriteError, StoreWriter, HeuristicFragmentMatcher, IntrospectionFragmentMatcher, defaultNormalizedCacheFactory, ObjectCache, record, RecordingCache } from 'apollo-cache-inmemory';
export { default as gql } from 'graphql-tag';
export { printAST, ObservableQuery, NetworkStatus, ApolloError, ApolloClient, FetchType } from 'apollo-client';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var APOLLO_BOOST_CONFIG = new InjectionToken('[apollo-angular-boost] config');

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var ApolloBoost = /** @class */ (function () {
    function ApolloBoost(apollo, httpLink) {
        this.apollo = apollo;
        this.httpLink = httpLink;
    }
    /**
     * @param {?} config
     * @return {?}
     */
    ApolloBoost.prototype.create = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        /** @type {?} */
        var cache = config && config.cacheRedirects
            ? new InMemoryCache({ cacheRedirects: config.cacheRedirects })
            : new InMemoryCache();
        /** @type {?} */
        var stateLink = config && config.clientState
            ? withClientState(__assign({}, config.clientState, { cache: cache }))
            : false;
        /** @type {?} */
        var errorLink = config && config.onError
            ? onError(config.onError)
            : onError(function (_a) {
                var graphQLErrors = _a.graphQLErrors, networkError = _a.networkError;
                if (graphQLErrors) {
                    graphQLErrors.map(function (_a) {
                        var message = _a.message, locations = _a.locations, path = _a.path;
                        // tslint:disable-next-line
                        return console.log("[GraphQL error]: Message: " + message + ", Location: " + locations + ", Path: " + path);
                    });
                }
                if (networkError) {
                    // tslint:disable-next-line
                    console.log("[Network error]: " + networkError);
                }
            });
        /** @type {?} */
        var requestHandler = config && config.request
            ? new ApolloLink(function (operation, forward) {
                return new Observable(function (observer) {
                    /** @type {?} */
                    var handle;
                    Promise.resolve(operation)
                        .then(function (oper) { return config.request(oper); })
                        .then(function () {
                        handle = forward(operation).subscribe({
                            next: observer.next.bind(observer),
                            error: observer.error.bind(observer),
                            complete: observer.complete.bind(observer),
                        });
                    })
                        .catch(observer.error.bind(observer));
                    return function () {
                        if (handle) {
                            handle.unsubscribe();
                        }
                    };
                });
            })
            : false;
        /** @type {?} */
        var httpLink = this.httpLink.create(__assign({}, ((config && config.httpOptions) || {}), { uri: (config && config.uri) || '/graphql' }));
        /** @type {?} */
        var link = ApolloLink.from((/** @type {?} */ ([
            errorLink,
            requestHandler,
            stateLink,
            httpLink,
        ].filter(function (x) { return !!x; }))));
        this.apollo.create({
            link: link,
            cache: cache,
        });
    };
    ApolloBoost.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ApolloBoost.ctorParameters = function () { return [
        { type: Apollo },
        { type: HttpLink }
    ]; };
    return ApolloBoost;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var ApolloBoostModule = /** @class */ (function () {
    function ApolloBoostModule(boost, config) {
        if (config) {
            boost.create(config);
        }
    }
    ApolloBoostModule.decorators = [
        { type: NgModule, args: [{
                    imports: [ApolloModule, HttpLinkModule],
                    providers: [ApolloBoost],
                },] }
    ];
    /** @nocollapse */
    ApolloBoostModule.ctorParameters = function () { return [
        { type: ApolloBoost },
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [APOLLO_BOOST_CONFIG,] }] }
    ]; };
    return ApolloBoostModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { APOLLO_BOOST_CONFIG, ApolloBoost, ApolloBoostModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmcuYXBvbGxvQm9vc3QuanMubWFwIiwic291cmNlcyI6WyJuZzovL2Fwb2xsby1hbmd1bGFyLWJvb3N0L3Rva2Vucy50cyIsIm5nOi8vYXBvbGxvLWFuZ3VsYXItYm9vc3QvQXBvbGxvQm9vc3QudHMiLCJuZzovL2Fwb2xsby1hbmd1bGFyLWJvb3N0L0Fwb2xsb0Jvb3N0TW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0aW9uVG9rZW59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQge1ByZXNldENvbmZpZ30gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBBUE9MTE9fQk9PU1RfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPFByZXNldENvbmZpZz4oXG4gICdbYXBvbGxvLWFuZ3VsYXItYm9vc3RdIGNvbmZpZycsXG4pO1xuIiwiaW1wb3J0IHtJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7QXBvbGxvTGluaywgT2JzZXJ2YWJsZX0gZnJvbSAnYXBvbGxvLWxpbmsnO1xuaW1wb3J0IHtBcG9sbG99IGZyb20gJ2Fwb2xsby1hbmd1bGFyJztcbmltcG9ydCB7SHR0cExpbmt9IGZyb20gJ2Fwb2xsby1hbmd1bGFyLWxpbmstaHR0cCc7XG5pbXBvcnQge3dpdGhDbGllbnRTdGF0ZX0gZnJvbSAnYXBvbGxvLWxpbmstc3RhdGUnO1xuaW1wb3J0IHtvbkVycm9yfSBmcm9tICdhcG9sbG8tbGluay1lcnJvcic7XG5pbXBvcnQge0luTWVtb3J5Q2FjaGV9IGZyb20gJ2Fwb2xsby1jYWNoZS1pbm1lbW9yeSc7XG5cbmltcG9ydCB7UHJlc2V0Q29uZmlnfSBmcm9tICcuL3R5cGVzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEFwb2xsb0Jvb3N0IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcG9sbG86IEFwb2xsbywgcHJpdmF0ZSBodHRwTGluazogSHR0cExpbmspIHt9XG5cbiAgcHVibGljIGNyZWF0ZShjb25maWc6IFByZXNldENvbmZpZykge1xuICAgIGNvbnN0IGNhY2hlID1cbiAgICAgIGNvbmZpZyAmJiBjb25maWcuY2FjaGVSZWRpcmVjdHNcbiAgICAgICAgPyBuZXcgSW5NZW1vcnlDYWNoZSh7Y2FjaGVSZWRpcmVjdHM6IGNvbmZpZy5jYWNoZVJlZGlyZWN0c30pXG4gICAgICAgIDogbmV3IEluTWVtb3J5Q2FjaGUoKTtcblxuICAgIGNvbnN0IHN0YXRlTGluayA9XG4gICAgICBjb25maWcgJiYgY29uZmlnLmNsaWVudFN0YXRlXG4gICAgICAgID8gd2l0aENsaWVudFN0YXRlKHsuLi5jb25maWcuY2xpZW50U3RhdGUsIGNhY2hlfSlcbiAgICAgICAgOiBmYWxzZTtcblxuICAgIGNvbnN0IGVycm9yTGluayA9XG4gICAgICBjb25maWcgJiYgY29uZmlnLm9uRXJyb3JcbiAgICAgICAgPyBvbkVycm9yKGNvbmZpZy5vbkVycm9yKVxuICAgICAgICA6IG9uRXJyb3IoKHtncmFwaFFMRXJyb3JzLCBuZXR3b3JrRXJyb3J9KSA9PiB7XG4gICAgICAgICAgICBpZiAoZ3JhcGhRTEVycm9ycykge1xuICAgICAgICAgICAgICBncmFwaFFMRXJyb3JzLm1hcCgoe21lc3NhZ2UsIGxvY2F0aW9ucywgcGF0aH0pID0+XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICBgW0dyYXBoUUwgZXJyb3JdOiBNZXNzYWdlOiAke21lc3NhZ2V9LCBMb2NhdGlvbjogJHtsb2NhdGlvbnN9LCBQYXRoOiAke3BhdGh9YCxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5ldHdvcmtFcnJvcikge1xuICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtOZXR3b3JrIGVycm9yXTogJHtuZXR3b3JrRXJyb3J9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9XG4gICAgICBjb25maWcgJiYgY29uZmlnLnJlcXVlc3RcbiAgICAgICAgPyBuZXcgQXBvbGxvTGluayhcbiAgICAgICAgICAgIChvcGVyYXRpb24sIGZvcndhcmQpID0+XG4gICAgICAgICAgICAgIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaGFuZGxlOiBhbnk7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG9wZXJhdGlvbilcbiAgICAgICAgICAgICAgICAgIC50aGVuKG9wZXIgPT4gY29uZmlnLnJlcXVlc3Qob3BlcikpXG4gICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZSA9IGZvcndhcmQob3BlcmF0aW9uKS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IG9ic2VydmVyLm5leHQuYmluZChvYnNlcnZlciksXG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG9ic2VydmVyLmVycm9yLmJpbmQob2JzZXJ2ZXIpLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBvYnNlcnZlci5jb21wbGV0ZS5iaW5kKG9ic2VydmVyKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgLmNhdGNoKG9ic2VydmVyLmVycm9yLmJpbmQob2JzZXJ2ZXIpKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZS51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgOiBmYWxzZTtcblxuICAgIGNvbnN0IGh0dHBMaW5rID0gdGhpcy5odHRwTGluay5jcmVhdGUoe1xuICAgICAgLi4uKChjb25maWcgJiYgY29uZmlnLmh0dHBPcHRpb25zKSB8fCB7fSksXG4gICAgICB1cmk6IChjb25maWcgJiYgY29uZmlnLnVyaSkgfHwgJy9ncmFwaHFsJyxcbiAgICB9KTtcblxuICAgIGNvbnN0IGxpbmsgPSBBcG9sbG9MaW5rLmZyb20oW1xuICAgICAgZXJyb3JMaW5rLFxuICAgICAgcmVxdWVzdEhhbmRsZXIsXG4gICAgICBzdGF0ZUxpbmssXG4gICAgICBodHRwTGluayxcbiAgICBdLmZpbHRlcih4ID0+ICEheCkgYXMgQXBvbGxvTGlua1tdKTtcblxuICAgIHRoaXMuYXBvbGxvLmNyZWF0ZSh7XG4gICAgICBsaW5rLFxuICAgICAgY2FjaGUsXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7TmdNb2R1bGUsIE9wdGlvbmFsLCBJbmplY3R9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtBcG9sbG9Nb2R1bGV9IGZyb20gJ2Fwb2xsby1hbmd1bGFyJztcbmltcG9ydCB7SHR0cExpbmtNb2R1bGV9IGZyb20gJ2Fwb2xsby1hbmd1bGFyLWxpbmstaHR0cCc7XG5cbmltcG9ydCB7QXBvbGxvQm9vc3R9IGZyb20gJy4vQXBvbGxvQm9vc3QnO1xuaW1wb3J0IHtBUE9MTE9fQk9PU1RfQ09ORklHfSBmcm9tICcuL3Rva2Vucyc7XG5pbXBvcnQge1ByZXNldENvbmZpZ30gZnJvbSAnLi90eXBlcyc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtBcG9sbG9Nb2R1bGUsIEh0dHBMaW5rTW9kdWxlXSxcbiAgcHJvdmlkZXJzOiBbQXBvbGxvQm9vc3RdLFxufSlcbmV4cG9ydCBjbGFzcyBBcG9sbG9Cb29zdE1vZHVsZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGJvb3N0OiBBcG9sbG9Cb29zdCxcbiAgICBAT3B0aW9uYWwoKVxuICAgIEBJbmplY3QoQVBPTExPX0JPT1NUX0NPTkZJRylcbiAgICBjb25maWc/OiBQcmVzZXRDb25maWcsXG4gICkge1xuICAgIGlmIChjb25maWcpIHtcbiAgICAgIGJvb3N0LmNyZWF0ZShjb25maWcpO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBSUEsSUFBYSxtQkFBbUIsR0FBRyxJQUFJLGNBQWMsQ0FDbkQsK0JBQStCLENBQ2hDOzs7Ozs7O0lDTUMscUJBQW9CLE1BQWMsRUFBVSxRQUFrQjtRQUExQyxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVTtLQUFJOzs7OztJQUUzRCw0QkFBTTs7OztJQUFiLFVBQWMsTUFBb0I7O1lBQzFCLEtBQUssR0FDVCxNQUFNLElBQUksTUFBTSxDQUFDLGNBQWM7Y0FDM0IsSUFBSSxhQUFhLENBQUMsRUFBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLGNBQWMsRUFBQyxDQUFDO2NBQzFELElBQUksYUFBYSxFQUFFOztZQUVuQixTQUFTLEdBQ2IsTUFBTSxJQUFJLE1BQU0sQ0FBQyxXQUFXO2NBQ3hCLGVBQWUsY0FBSyxNQUFNLENBQUMsV0FBVyxJQUFFLEtBQUssT0FBQSxJQUFFO2NBQy9DLEtBQUs7O1lBRUwsU0FBUyxHQUNiLE1BQU0sSUFBSSxNQUFNLENBQUMsT0FBTztjQUNwQixPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztjQUN2QixPQUFPLENBQUMsVUFBQyxFQUE2QjtvQkFBNUIsZ0NBQWEsRUFBRSw4QkFBWTtnQkFDbkMsSUFBSSxhQUFhLEVBQUU7b0JBQ2pCLGFBQWEsQ0FBQyxHQUFHLENBQUMsVUFBQyxFQUEwQjs0QkFBekIsb0JBQU8sRUFBRSx3QkFBUyxFQUFFLGNBQUk7O3dCQUUxQyxPQUFBLE9BQU8sQ0FBQyxHQUFHLENBQ1QsK0JBQTZCLE9BQU8sb0JBQWUs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