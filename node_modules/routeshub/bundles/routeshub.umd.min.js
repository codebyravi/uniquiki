!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("rxjs")):"function"==typeof define&&define.amd?define("routeshub",["exports","rxjs"],r):r(e.routeshub={},e.rxjs)}(this,function(e,r){"use strict";var b=function(){return(b=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var u in r=arguments[n])Object.prototype.hasOwnProperty.call(r,u)&&(e[u]=r[u]);return e}).apply(this,arguments)};function t(t,u){var o,a,i,e,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function r(r){return function(e){return function n(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=2&e[0]?a["return"]:e[0]?a["throw"]||((i=a["return"])&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(i=0<(i=c.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){c.label=e[1];break}if(6===e[0]&&c.label<i[1]){c.label=i[1],i=e;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(e);break}i[2]&&c.ops.pop(),c.trys.pop();continue}e=u.call(t,c)}catch(r){e=[6,r],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([r,e])}}}function u(e,r){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var t,u,o=n.call(e),a=[];try{for(;(void 0===r||0<r--)&&!(t=o.next()).done;)a.push(t.value)}catch(i){u={error:i}}finally{try{t&&!t.done&&(n=o["return"])&&n.call(o)}finally{if(u)throw u.error}}return a}var h=function c(){var r,n;return t(this,function(e){switch(e.label){case 0:r=0,e.label=1;case 1:return[4,r++];case 2:return(n=e.sent())&&(r=n.reset?-1:r),[3,1];case 3:return[2]}})}();function n(e,r){return""!==r?function n(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(u(arguments[r]));return e}(e,[r]):e}var v=function(e,r){return r.includes("*")?[r]:n(null!==e?e.state:["/"],r)},y=function(e,r){return r.reduce(function(e,r){return b({},e,r)},e)},j=function(n,e){return void 0===e&&(e=[]),Object.keys(n).reduce(function(e,r){return e.map(function(e){return e===":"+r?n[r]:e})},e)};function x(d,p){return Object.keys(p).reduce(function(e,r){var n,t=p[r],u=t.children,o=t.path,a=t.lazy,i=v(d,o),c={id:h.next().value,parentId:null!==d?d.id:null,state:i,stateFn:function l(e,r){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];if(!r)return e;var u=0===n.length?r:y(r,n);return j(u,e)}.bind(null,i),path:function f(e){return-1!==(e?e.indexOf("/"):-1)}(o)?function s(e){return e.split("/").filter(function(e){return!!e})}(o):o,lazy:a||null,routeName:r};return Object.assign(e,((n={})[r]=b({},c,{children:u!==undefined?x(c,u):null}),n))},{})}var o=new r.BehaviorSubject(null),a=function(u){return Object.keys(u).reduce(function(e,r){var n;return u[r].children?Object.assign({},e,function t(a){var i=a.children,c=a.id+1,l=Object.keys(i).find(function(e){return i[e].id===c});return Object.keys(i).reduce(function(e,r){var n,t=i[r].id===c?a.parentId:i[l].id,u=r===l&&"root"===r?a.routeName:r,o=b({},i[r],{parentId:t,routeName:u});return b({},e,((n={})[u]=o,n))},{})}(u[r])):Object.assign({},e,((n={})[r]=u[r],n))},{})};function i(e,r){var n,t=a(r);return Object.assign({},o.value,((n={})[e]=t,n))}e.rootNote={root:{path:""}},e.createRoot=function l(e,r){if(void 0===r&&(r="app"),null!==o.value)throw new Error("Routeshub is already declared");var n=i(r,x(null,e));return o.next(n),o.value[r]},e.createFeature=function f(e,r){var n=x(e,r),t=i(e.routeName,n);return o.next(t),o.value[e.routeName]},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=routeshub.umd.min.js.map